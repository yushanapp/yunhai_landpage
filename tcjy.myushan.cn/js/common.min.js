function PcListPagination(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q) { if (kino.razor.use("$"), c.indexOf("Style1_") > -1) $("#smv_" + a + " #prePage").click(function () { var c, b = $("#smv_" + a + " #pagerHtml a[class *='activi']"); "1" != b.html() && (c = $("#smv_" + a + " #pagerHtml li[class !='dom'] a:not(a[class *='w-page-flip'])"), $.each(c, function () { parseInt($(this).html()) == parseInt(b.html()) - 1 && $(this).click() })) }), $("#smv_" + a + " #nextPage").click(function () { var c, b = $("#smv_" + a + " #pagerHtml a[class *='activi']"); b.html() != e.toString() && (c = $("#smv_" + a + " #pagerHtml li[class !='dom'] a:not(a[class *='w-page-flip'])"), $.each(c, function () { parseInt($(this).html()) == parseInt(b.html()) + 1 && $(this).click() })) }), $("#smv_" + a + " #pagerHtml li[class !='dom'] a:not(a[class *='w-page-flip'])").click(function () { var r = parseInt($(this).html()), s = $(this).html(); e > 5 && (4 > r ? ($("#smv_" + a + " #firstdom").hide(), $("#smv_" + a + " #lasedom").show(), $("#smv_" + a + " #secondPage").html(2), $("#smv_" + a + " #thirdPage").html(3), $("#smv_" + a + " #forthPage").html(4)) : r > e - 3 ? ($("#smv_" + a + " #firstdom").show(), $("#smv_" + a + " #lasedom").hide(), $("#smv_" + a + " #secondPage").html(e - 3), $("#smv_" + a + " #thirdPage").html(e - 2), $("#smv_" + a + " #forthPage").html(e - 1)) : ($("#smv_" + a + " #firstdom").show(), $("#smv_" + a + " #lasedom").show(), $("#smv_" + a + " #secondPage").html(r - 1), $("#smv_" + a + " #thirdPage").html(r), $("#smv_" + a + " #forthPage").html(r + 1))), $("#smv_" + a + " #pagerHtml").find("a").removeClass("activi"), $.each($("#smv_" + a + " #pagerHtml").find("a"), function () { $(this).html() == s && $(this).addClass("activi") }), AssembleData(a, b, c, d, r, e, f, g, h, i, j, k, l, m, n, o, p, q) }); else if (c.indexOf("Style2_") > -1) $("#smv_" + a + " #prePage").click(function () { var r = parseInt($("#smv_" + a + " #firstNum").html()); 1 != r && (r -= 1, $("#smv_" + a + " #firstNum").html(r), AssembleData(a, b, c, d, r, e, f, g, h, i, j, k, l, m, n, o, p, q)) }), $("#smv_" + a + " #nextPage").click(function () { var r = parseInt($("#smv_" + a + " #firstNum").html()); r != e && (r += 1, $("#smv_" + a + " #firstNum").html(r), AssembleData(a, b, c, d, r, e, f, g, h, i, j, k, l, m, n, o, p, q)) }), $("#smv_" + a + " #goPage").click(function () { var r = $("#smv_" + a + " #turnPage").val(), s = parseInt(r); !isNaN(s) && e >= s && s >= 1 ? ($("#smv_" + a + " #firstNum").html(s), AssembleData(a, b, c, d, s, e, f, g, h, i, j, k, l, m, n, o, p, q), $("#smv_" + a + " #turnPage").val("")) : $("#smv_" + a + " #turnPage").val("") }); else if (c.indexOf("Style3_") > -1) { var r = 1; $("#smv_" + a + " #searchMore").click(function () { r++ , r == e && $(this).parent().hide(), AssembleData(a, b, c, d, r, e, f, g, h, i, j, k, l, m, n, o, p, q) }) } } function AssembleData(htmlId, listType, pagerStyle, pageSize, pageIndex, totalPage, categoryIds, entityIds, dateStyle, orderByField, orderByType, isCategoryList, postData, searchKeyWord, showImage, showPrice, callBack, templateId) { var param = { dataType: listType, key: searchKeyWord, pageIndex: pageIndex - 1, pageSize: pageSize, selectCategory: categoryIds, selectId: entityIds, dateFormater: dateStyle, orderByField: orderByField, orderByType: orderByType, setTop: !0, templateId: templateId, postData: JSON.stringify(postData) }; $.post("/Designer/Common/GetData", param, function (data) { var preAddHetght, func; pagerStyle.indexOf("Style1_") > -1 || pagerStyle.indexOf("Style2_") > -1 ? ($("#ulList_" + htmlId + " li").remove(), $.each(data.Data, function (a, b) { $("#ulList_" + htmlId).append(kino.razor($("#listTemplate_" + htmlId).html(), { data: b })) })) : pagerStyle.indexOf("Style3_") > -1 && (preAddHetght = $("#smv_" + htmlId + " .yibuFrameContent").height(), $.each(data.Data, function (a, b) { $("#ulList_" + htmlId).append(kino.razor($("#listTemplate_" + htmlId).html(), { data: b })) })), isExitsFunction(callBack) && (func = eval(callBack), func()) }, "json") } function isExitsFunction(funcName) { try { if ("function" == typeof eval(funcName)) return !0 } catch (e) { } return !1 } function recordPageAccess(a, b, c, d) { $.ajax({ url: "/PageVisit/Index", data: { pageId: a, siteId: b, entityId: c, pageType: d }, dataType: "jsonp", jsonp: "callback", type: "get", success: function () { } }) } function GetStateProvince(a, b, c) { $.ajax({ cache: !1, url: "/Customer/GetStateProvinces", type: "get", dataType: "json", success: function (d) { null != d && $.each(d, function (d, e) { "mobile" == c ? e["Id"] == a ? b.append('<li class="mw-address-item current" provinceId="' + e["Id"] + '" name="' + e["Name"] + '"><span class="mw-iconfont">&#xa018;</span><div>' + e["Name"] + "</div></li>") : b.append('<li class="mw-address-item" provinceId="' + e["Id"] + '" name="' + e["Name"] + '"><span class="mw-iconfont">&#xa018;</span><div>' + e["Name"] + "</div></li>") : e["Id"] == a ? b.append('<li class="w-address-conul-item w-address-current"provinceId="' + e["Id"] + '"><a class="w-address-conul-link">' + e["Name"] + "</a></li>") : b.append('<li class="w-address-conul-item"provinceId="' + e["Id"] + '"><a class="w-address-conul-link">' + e["Name"] + "</a></li>") }) }, error: function () { } }) } function GetCity(a, b, c, d) { $.ajax({ cache: !1, url: "/Customer/GetCitysByStateProvince", data: { stateProvinceId: a }, type: "get", dataType: "json", success: function (a) { null != a && $.each(a, function (a, e) { "mobile" == d ? e["Id"] == b ? c.append('<li class="mw-address-item current" cityId="' + e["Id"] + '" name="' + e["Name"] + '"><span class="mw-iconfont">&#xa018;</span><div>' + e["Name"] + "</div></li>") : c.append('<li class="mw-address-item" cityId="' + e["Id"] + '" name="' + e["Name"] + '"><span class="mw-iconfont">&#xa018;</span><div>' + e["Name"] + "</div></li>") : e["Id"] == b ? c.append('<li class="w-address-conul-item w-address-current" cityId="' + e["Id"] + '"><a class="w-address-conul-link">' + e["Name"] + "</a></li>") : c.append('<li class="w-address-conul-item" cityId="' + e["Id"] + '"><a class="w-address-conul-link">' + e["Name"] + "</a></li>") }) }, error: function () { } }) } function GetArea(a, b, c, d) { $.ajax({ cache: !1, url: "/Customer/GetAreasByCityId", data: { cityId: a }, type: "get", dataType: "json", success: function (b) { null != b && $.each(b, function (b, e) { "mobile" == d ? e["Id"] == a ? c.append('<li class="mw-address-item current" areaId="' + e["Id"] + '" name="' + e["Name"] + '"><span class="mw-iconfont">&#xa018;</span><div>' + e["Name"] + "</div></li>") : c.append('<li class="mw-address-item" areaId="' + e["Id"] + '" name="' + e["Name"] + '"><span class="mw-iconfont">&#xa018;</span><div>' + e["Name"] + "</div></li>") : e["Id"] == a ? c.append('<li class="w-address-conul-item w-address-current" areaId="' + e["Id"] + '"><a class="w-address-conul-link">' + e["Name"] + "</a></li>") : c.append('<li class="w-address-conul-item" areaId="' + e["Id"] + '"><a class="w-address-conul-link">' + e["Name"] + "</a></li>") }) }, error: function () { } }) } function SetNavSelectedStyle(a) { var b = decodeURI(window.location.pathname) + window.location.search; $("#" + a).find(".w-nav-inner").each(function () { var a = $(this).find("a").attr("href"); return null != a && (a = a.replace(" ", "%20"), a.toLowerCase() == b.toLowerCase()) ? ($(this).find(".w-nav-item").addClass("current"), void 0) : ($(this).children("ul").length > 0 && $(this).children("ul").find("li").each(function () { return a = $(this).find("a").attr("href"), null != a && (a = a.replace(" ", "%20"), a.toLowerCase() == b.toLowerCase()) ? ($(this).addClass("current"), void 0) : void 0 }), void 0) }) } function SetNavSelectedStyleForStyle12(a) { var b = decodeURI(window.location.pathname) + window.location.search; $("#" + a).find("li.w-nav-item").each(function () { var a = $(this).find("a").attr("href"); return null != a && (a = a.replace(" ", "%20"), a.toLowerCase() == b.toLowerCase()) ? ($(this).addClass("current"), void 0) : ($(this).children("ul").length > 0 && $(this).children("ul").find("li").each(function () { return a = $(this).find("a").attr("href"), null != a && (a = a.replace(" ", "%20"), a.toLowerCase() == b.toLowerCase()) ? ($(this).addClass("current"), void 0) : void 0 }), void 0) }) } function SetNavSelectedStyleForInner(a) { var b = decodeURI(window.location.pathname) + window.location.search; $("#" + a).find("li.w-nav-inner").each(function () { var a = $(this).find("a").attr("href"); return null != a && (a = a.replace(" ", "%20"), a.toLowerCase() == b.toLowerCase()) ? ($(this).addClass("current"), void 0) : ($(this).children("ul").length > 0 && $(this).children("ul").find("li").each(function () { return a = $(this).find("a").attr("href"), null != a && (a = a.replace(" ", "%20"), a.toLowerCase() == b.toLowerCase()) ? ($(this).addClass("current"), void 0) : void 0 }), void 0) }) } function SetNavSelectedStyleForMobile(a) { var b = decodeURI(window.location.pathname) + window.location.search; $("#" + a).find("li").each(function () { var a = $(this).find("a").attr("href"); return null != a && (a = a.replace(" ", "%20"), a.toLowerCase() == b.toLowerCase()) ? ($(this).find(".mw-nav-item-link").addClass("current"), void 0) : void 0 }) } function InitImageSmv(a, b, c, d) { var i, j, k, l, m, n, e = $("#div_" + a), f = $("#smv_" + a), g = $("#img_smv_" + a); e.find(".w-image-box"), i = parseInt(e.css("border-left-width")), j = b - i, k = parseInt(f.css("height")) - 2 * i, "1" == d ? g[0].complete ? ImagecutFill(j, k, a, c) : g.load(function () { ImagecutFill(j, k, a, c) }) : "2" == d ? (e.css({ width: j + 2 * i + "px", height: k + 2 * i + "px" }), g.css("width", j + "px").css("height", k + "px"), g.parent().css("width", "100%").css("height", "100%")) : (f = $("#smv_" + a), l = $("#div_" + a), m = {}, m = $("#div_" + a + " img").FixFill(parseInt(f.css("width")), k, ""), $("#div_" + a + " img").css({ height: m.height, width: m.width }), l.css({ height: m.height, width: m.width }), n = parseInt(m.height), f.css({ height: n, width: m.width })) } function ImagecutFill(a, b, c, d) { var i, e = $("#div_" + c), f = $("#img_smv_" + c), g = f[0].naturalWidth, h = f[0].naturalHeight; halfIntWidth = a / 2, halfIntHeight = b / 2, i = g / h, e.css({ height: d + "px" }), i >= 1.5 ? a > b * i ? $(f).css("width", a + "px").css("height", "auto").css("marginTop", halfIntHeight - halfIntWidth * parseInt(h) / parseInt(g) + "px").css("marginLeft", "0px") : $(f).css("width", "auto").css("height", b + "px").css("marginLeft", halfIntWidth - halfIntHeight * parseInt(g) / parseInt(h) + "px").css("marginTop", "0px") : b > a / i ? $(f).css("width", "auto").css("height", b + "px").css("marginLeft", halfIntWidth - halfIntHeight * parseInt(g) / parseInt(h) + "px").css("marginTop", "0px") : $(f).css("width", a + "px").css("height", "auto").css("marginTop", halfIntHeight - halfIntWidth * parseInt(h) / parseInt(g) + "px").css("marginLeft", "0px") } function SetNavSelectedStyleForMobileOpen(a) { var b = decodeURI(window.location.pathname) + window.location.search; $("#" + a).find("li").each(function () { var a = $(this).find("a").attr("href"); return null != a && (a = a.replace(" ", "%20"), a.toLowerCase() == b.toLowerCase()) ? ($(this).find(".mw-nav-item-link").addClass("current"), void 0) : void 0 }) } function VisitFromMobile() { var a = navigator.userAgent, b = a.match(/(iPad).*OS\s([\d_]+)/), c = !b && a.match(/(iPhone\sOS)\s([\d_]+)/), d = a.match(/(Android)\s+([\d.]+)/), e = c || d; return e } function SetCategoryStyleForPc(a) { var d, e, b = window.location.search, c = b.substr(b.indexOf("=") + 1); "" != c && (d = c.split(","), e = d[0], $("#" + a).find("li").each(function () { var a = $(this).attr("data-id"); return a == e ? ($(this).addClass("on"), void 0) : void 0 })) } function pagination(a, b, c, d, e, f) { var m, n, o, p, q, r, s, t, u, v, w, x, g = a, h = 5, i = 0, j = 0, k = $("#" + g), l = k.height(); if (null != k.html()) { if (m = k.find("div").html().split("_ueditor_page_break_tag_"), n = m.length, 1 != n) { for (o = $("<div />", { "class": "pagination" }), k.append(o), n > h && (o.append("<span id=first_page_" + g + " class='other_page'>" + (null == b || void 0 == b ? "首页" : b) + "</span>"), o.append("<span id=pre_page_" + g + " class='other_page'>" + (null == d || void 0 == d ? "上一页" : d) + "</span>")), p = 0; n > p; p++)o.append("<a class='page' id=" + p + " >" + (p + 1) + "</a>"); q = k.find(".page"), q.first().addClass("hover"), k.find(".page:gt(" + (h - 1) + ")").hide(), q.click(function () { var a, b; l = k.height(), a = parseInt($(this).attr("id")), h > n ? (q.removeClass("hover"), k.find("div:eq(0)").html(m[a]), $(this).addClass("hover")) : n >= h && a > Math.floor(h / 2) ? (q.removeClass("hover"), k.find("div:eq(0)").html(m[a]), $(this).addClass("hover"), 0 === h % 2 ? (i = a - h / 2 + 1, j = a + h / 2) : (i = a - Math.floor(h / 2), j = a + Math.floor(h / 2)), i > n - h ? (k.find(".page:gt(" + (n - h) + ")").show(), k.find(".page:lt(" + (n - h) + ")").hide()) : (k.find(".page:lt(" + i + ")").hide(), k.find(".page:gt(" + j + ")").hide(), q.slice(i, j + 1).show())) : n >= h && a <= Math.floor(h / 2) && (q.removeClass("hover"), k.find("div:eq(0)").html(m[a]), $(this).addClass("hover"), k.find(".page:gt(" + (h - 1) + ")").hide(), k.find(".page:lt(" + h + ")").show()), n > h && (b = parseInt(k.find(".hover").attr("id")) + 1, $("#current_page_" + g).text(b + "/" + n)), "function" == typeof f && setTimeout(function () { f(l) }, 500) }), n > h && (r = parseInt(k.find(".hover").attr("id")) + 1, o.append("<span id=current_page_" + g + " class='current_page'>" + r + "/" + n + "</span>"), o.append("<span id=post_page_" + g + " class='other_page'>" + (null == e || void 0 == e ? "下一页" : e) + "</span>"), o.append("<span id=last_page_" + g + " class='other_page'>" + (null == c || void 0 == c ? "尾页" : c) + "</span>")), s = $("#pre_page_" + g), t = $("#post_page_" + g), u = $("#first_page_" + g), v = $("#last_page_" + g), w = $("#to_page_" + g), x = $("#go_page_" + g), s.click(function () { var a = $(this).parent().find(".hover"); "0" !== a.attr("id") && (q.removeClass("hover"), a.prev().addClass("hover"), a.prev().click()) }), t.click(function () { var a = $(this).parent().find(".hover").next(); a.attr("id") < $(this).parent().children("a").length && (q.removeClass("hover"), a.addClass("hover"), a.click()) }), u.click(function () { q.removeClass("hover"), q.first().addClass("hover"); var a = q.first(); a.click() }), v.click(function () { q.removeClass("hover"), q.last().addClass("hover"); var a = q.last(); a.click() }), x.click(function () { var d, a = w.val(), b = /^[0-9]*[1-9][0-9]*$/, c = b.test(a); return parseInt(a) > n || !c ? (alert("无第【" + a + "】页,请重新键入"), void 0) : (q.removeClass("hover"), k.find(".page:eq(" + (a - 1) + ")").addClass("hover"), d = $(this).parent().find(".hover"), d.click(), void 0) }) } k.find("div:eq(0)").html(m[0]), "function" == typeof f && setTimeout(f, 500) } } function setCurrentPageTitle(a, b) { var c, e, g; void 0 != a && "" != a && (c = window.location.pathname.toLowerCase(), window.location.search.toLowerCase(), 0 === c.indexOf("/") && (c = c.substring(1, c.length)), e = RegExp(/^\w*[a-zA-Z]+\w*$/), e.test(c) && (g = c + "_" + b, sessionStorage.setItem(g, a))) } function CheckIfInMyFavourite(a, b, c) { $.post("/customer/MyFavouriteCheckIfIn", { id: a, type: b }, function (a) { "function" == typeof c && c(a.IsLogin, a.IsInMyFavourite) }, "json") } function DeleteFromMyFavourite(a, b, c) { $.post("/customer/MyFavouriteDeleteByEntityId", { id: a, type: b }, function () { "function" == typeof c && c(), "function" == typeof cartControlGetProductCount && cartControlGetProductCount() }, "json") } function AddToMyFavourite(a, b, c, d) { $.post("/customer/MyFavouriteAdd", { ids: a, type: b, trigger: d }, function (a) { "function" == typeof c && c(a.NewsCount, a.ProductCount, a.alreadyInFavourite), "function" == typeof cartControlGetProductCount && cartControlGetProductCount() }, "json") } function GetPcStyleTemp(a, b) { var c = ""; switch (a.toLowerCase().substring(0, 6)) { case "style1": switch (c = "w-page-square", b) { case "0": c = "w-page-square"; break; case "1": c = "w-page-square-orange"; break; case "2": c = "w-page-square-blue"; break; case "3": c = "w-page-square-red"; break; case "4": c = "w-page-round"; break; case "5": c = "w-page-alpha" }return { baseClass: "w-pageline w-page-num", firsthtml: "", prevhtml: "<li class='w-page-cm w-page-flip'><a href='javascript:void(0);'><span>{{prev}}</span><i>&lt;</i></a></li>", nexthtml: "<li class='w-page-cm w-page-flip'><a href='javascript:void(0);'><span>{{next}}</span><i>&gt;</i></a></li>", lasthtml: "", pagehtml: "<li class='w-page-cm'><a href='javascript:void(0);'>{{page}}</a></li>", wrapperhtml: "<ul class='" + c + " w-clearfix'></ul>" }; case "style2": switch (c = "w-page-rectangle-white", b) { case "0": c = "w-page-rectangle-white"; break; case "1": c = "w-page-rectangle"; break; case "2": c = "w-page-rectangle-round"; break; case "3": c = "w-page-rectangle-red"; break; case "4": c = "w-page-rectangle-alpha" }return { baseClass: "w-pageline w-page-go", firsthtml: "", prevhtml: "<li class='w-page-cm w-page-flip'><a href='javascript:void(0);'><span>{{prev}}</span><i>&lt;</i></a></li>", nexthtml: "<li class='w-page-cm w-page-flip'><a href='javascript:void(0);'><span>{{next}}</span><i>&gt;</i></a></li>", lasthtml: "", pagehtml: "<li class='w-page-cm'><em>{{page}}</em>/<em>{{totalPages}}</em></li>", afterhtml: "<li><span class='w-line-height-ie7'>{{goto}}</span><input type='text' jp-data='go'></li><li class='w-page-cm w-page-flip'><a href='javascript:void(0);' jp-role='go' id='goPage'>{{go}}</a></li>", wrapperhtml: "<ul class='" + c + " w-clearfix'></ul>", vpage: 1 }; case "style3": switch (c = "w-page-more-one", b) { case "0": c = "w-page-more-one"; break; case "1": c = "w-page-more-two"; break; case "2": c = "w-page-more-three"; break; case "3": c = "w-page-more-fives"; break; case "4": c = "w-page-more-six" }return { baseClass: "w-pageline w-page-more-box", firsthtml: "", prevhtml: "", nexthtml: "<a href='javascript:void(0);' class='w-page-more " + c + "' jp-role='more'>{{more}}</a>", lasthtml: "", pagehtml: "" }; default: return { baseClass: "w-pageline", firsthtml: "", prevhtml: "", nexthtml: "", lasthtml: "", pagehtml: "" } } } function GetMobileStyleTemp(a, b) { var c = ""; switch (a.toLowerCase().substring(0, 6)) { case "style1": switch (c = "mw-previous-one", b) { case "0": c = "mw-previous-one"; break; case "1": c = "mw-previous-two"; break; case "2": c = "mw-previous-three"; break; case "3": c = "mw-previous-four"; break; case "4": c = "mw-previous-fives"; break; case "5": c = "mw-previous-six" }return { baseClass: "mw-page mw-pagenum mw-clearfix", firsthtml: "", prevhtml: "<li class='mw-w25'><a href='javascript:void(0);' class='mw-previous " + c + "'><span>{{prev}}</span><i>&lt;</i></a></li>", nexthtml: "<li class='mw-w25'><a href='javascript:void(0);' class='mw-previous " + c + " mw-fright'><span>{{next}}</span><i>&gt;</i></a></li>", lasthtml: "", pagehtml: "", afterhtml: "<li class='mw-w50'><em>{{page}}</em>/<em>{{totalPages}}</em></li>", wrapperhtml: "<ul></ul>", vpage: 1 }; case "style2": switch (c = "mw-page-more-one", b) { case "0": c = "mw-page-more-one"; break; case "1": c = "mw-page-more-two"; break; case "2": c = "mw-page-more-three"; break; case "3": c = "mw-page-more-fives"; break; case "4": c = "mw-page-more-six" }return { baseClass: "mw-page mw-page-more-box", firsthtml: "", prevhtml: "", nexthtml: "<a href='javascript:void(0);' class='mw-page-more " + c + "' jp-role='more'>{{more}}</a>", lasthtml: "", pagehtml: "", afterhtml: "", wrapperhtml: "" }; default: return { baseClass: "mw-pageline", firsthtml: "", prevhtml: "", nexthtml: "", lasthtml: "", pagehtml: "" } } } function xnPager(a) { xnPagerCommon(a, "/Designer/Common/GetData") } function spXnPager(a) { xnPagerCommon(a, "/SpDesigner/Common/GetData") } function xnPagerCommon(pagerId, url) { var device, styleTemp, options, pager = $("#" + pagerId), filter = function (a) { var c, b = a.parent().parent().attr("ctype"); return "listproductcategory" != b && "listproductsearch" != b || "function" != typeof xFilter ? a.attr("jp-postdata") : (c = xFilter(), JSON.stringify(c)) }, queryData = function (pager, pageIndex, forcerefresh) { var localdata, data, start, end, i, style = pager.attr("jp-style").toLowerCase().substring(0, 6), device = pager.attr("jp-device"), callback = pager.attr("jp-callback"), htmlId = pager.attr("jp-htmlid"), localLoad = pager.attr("jp-localload"), query = { dataType: pager.attr("jp-listtype"), key: pager.attr("jp-skey"), pageIndex: pageIndex - 1, pageSize: pager.attr("jp-pagesize"), selectCategory: pager.attr("jp-cid"), selectId: pager.attr("jp-eid"), dateFormater: pager.attr("jp-datestyle"), orderByField: pager.attr("jp-orderbyfield"), orderByType: pager.attr("jp-orderbytype"), templateId: pager.attr("jp-templateid"), postData: filter(pager), es: "true" == pager.attr("jp-es"), setTop: !0 }, bulidHtml = function (data, totalCount) { function scrollToPosition(a, b) { var c, d; 0 > a && (a = 0), b-- <= 0 || (console.log(b), c = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop, c != a && (d = Math.floor((c + scrollTop) / 2 + Math.random()), window.scrollTo(window.scrollX, d), c != a && setTimeout(function () { scrollToPosition(a, b) }, 10))) } var htmlappend, scrollTop, preAddHetght, func; switch (kino.razor.use("$"), device + "_" + style) { case "pc_style1": case "pc_style2": case "mobile_style1": $("#ulList_" + htmlId + " li").remove(), htmlappend = "", $.each(data, function (a, b) { htmlappend += kino.razor($("#listTemplate_" + htmlId).html(), { data: b }) }), $("#ulList_" + htmlId).append(htmlappend), forcerefresh && pager.jqPaginator("option", { currentPage: 1 }), pager.jqPaginator("option", { totalCounts: totalCount }), (document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop) > $("#ulList_" + htmlId).offset().top && (scrollTop = $("#ulList_" + htmlId).offset().top - 60, scrollToPosition(scrollTop, 20)); break; case "pc_style3": case "mobile_style2": $("#smv_" + htmlId).smpreparerecompute(), preAddHetght = $("#smv_" + htmlId + " .yibuFrameContent").height(), htmlappend = "", $.each(data, function (a, b) { htmlappend += kino.razor($("#listTemplate_" + htmlId).html(), { data: b }) }), forcerefresh && ($("#ulList_" + htmlId + " li").remove(), pager.jqPaginator("option", { currentPage: 1 })), $("#ulList_" + htmlId).append(htmlappend), pager.jqPaginator("option", { totalCounts: totalCount }), $("#smv_" + htmlId).smautorecompute() }isExitsFunction(callback) && (func = eval(callback), func()), $("#smv_" + htmlId).find(".pager-text span").html(totalCount) }; if (void 0 != localLoad && "1" == localLoad) { if (localdata = $(pager).data("localdata"), void 0 != localdata) { for (data = [], start = query.pageIndex * parseInt(query.pageSize), end = (query.pageIndex + 1) * parseInt(query.pageSize), end = Math.min(localdata.length, end), i = start; end > i; i++)data.push(localdata[i]); bulidHtml(data, localdata.length) } } else $.post(url, query, function (a) { bulidHtml(a.Data, a.TotalCount) }, "json") }, buildItem = function (a) { return a ? a.replace(/{{first}}/g, pager.attr("jp-first")).replace(/{{prev}}/g, pager.attr("jp-prev")).replace(/{{next}}/g, pager.attr("jp-next")).replace(/{{last}}/g, pager.attr("jp-last")).replace(/{{goto}}/g, pager.attr("jp-goto")).replace(/{{go}}/g, pager.attr("jp-go")).replace(/{{more}}/g, pager.attr("jp-more")) : "" }, style = pager.attr("jp-style"), color = pager.attr("jp-color"), align = pager.attr("jp-align"); "center" != align && pager.css("float", align), device = pager.attr("jp-device"), styleTemp = "mobile" == device ? GetMobileStyleTemp(style, color, align) : GetPcStyleTemp(style, color, align), pager.addClass(styleTemp.baseClass), options = {}, options.wrapper = styleTemp.wrapperhtml, options.first = buildItem(styleTemp.firsthtml), options.prev = buildItem(styleTemp.prevhtml), options.next = buildItem(styleTemp.nexthtml), options.last = buildItem(styleTemp.lasthtml), options.before = buildItem(styleTemp.beforehtml), options.after = buildItem(styleTemp.afterhtml), options.page = buildItem(styleTemp.pagehtml), options.totalCounts = parseInt(pager.attr("jp-totalcounts")), options.pageSize = parseInt(pager.attr("jp-pagesize")), options.currentPage = parseInt(pager.attr("jp-currentpage")), styleTemp.vpage && pager.attr("jp-vpage", styleTemp.vpage), options.visiblePages = parseInt(pager.attr("jp-vpage")), options.onPageChange = function (a, b) { "false" != pager.attr("jp-enable") && "change" == b && queryData(pager, a) }, pager.jqPaginator(options), pager.data("Q", queryData) } function xFilterRefresh(a) { var c, b = $(".esmartMargin[ctype=listproductcategory],.esmartMargin[ctype=listproductsearch]").find(".xn-pager"); "false" != b.attr("jp-enable") && (c = b.data("Q"), console.log("QQ"), "function" == typeof c && c(b, a || 1, !0)) } function xFilter() { return [] } function ResetHeight() { } function refreshStaticData() { var e, f, g, h, b = $(".AR"); if (0 != b.length) { e = {}, b.each(function () { var a = $(this).attr("data-dt"), b = $(this).attr("data-v"); e[a] || (e[a] = []), e[a].indexOf(b) < 0 && e[a].push(b) }), f = {}, g = 0; for (h in e) f["postDatas[" + g + "].DataType"] = h, f["postDatas[" + g + "].DataKey"] = e[h].join(); $.ajax({ url: "/Common/GetIdHitDic", data: f, dataType: "json", type: "POST", success: function (a) { b.each(function () { var e, f, g, b = $(this), c = $(this).attr("data-dt"), d = $(this).attr("data-v"); for (e = 0; e < a.length; e++)if (f = a[e].DataType, c == f) for (g = a[e].ListIdHits, j = 0; j < g.length; j++)d == g[j].Id && b.html(g[j].Hit) }) } }) } } function JPlaceHolder(a) { var b = { _check: function () { return "placeholder" in document.createElement("input") }, init: function (a) { this._check() || this.fix(a) }, fix: function (a) { jQuery(".w-placeholder > :input[placeholder]").each(function () { var f, d = $(this), e = d.attr("placeholder"); d.wrap($('<div class="placeholder-text"></div>').css({})), f = $('<div class="placeholder-text-in"></div>').text(e).css({}).appendTo(d.parent()), d.val() && f.hide(), d.focusin(function () { f.hide() }).focusout(function () { d.val() || f.show() }), f.click(function () { f.hide(), d.focus() }), "function" == typeof a && a() }) } }; b.init(a) } function showSlidingCode(a, b) { var c, d, e, f, g, h, i; if (void 0 == sessionStorage && $("#" + b).parent().parent().hide(), c = a + "-" + b, d = sessionStorage.getItem(c), null != d && "" != d) { for (e = JSON.parse(d), f = (new Date).getTime(), g = [], h = 0; h < e.length; h++)i = new Date(e[h]).getTime(), 3e5 > f - i && g.push(e[h]); if (sessionStorage.setItem(c, JSON.stringify(g)), g.length >= 3) return $("#" + b).parent().parent().show(), $("#" + b).lzhdyz("refresh"), !1 } return $("#" + b).parent().parent().hide(), !0 } function hideSlidingCode(a, b) { void 0 == sessionStorage && $("#" + b).parent().parent().hide(), $("#" + b).parent().parent().hide() } function setSlidingCodeTime(a, b) { var c, d, e, f; return void 0 == sessionStorage ? !1 : (c = a + "-" + b, d = sessionStorage.getItem(c), e = [], null != d && "" != d && (e = JSON.parse(d)), f = new Date, e.push(f), sessionStorage.setItem(c, JSON.stringify(e)), $("#" + b).parent().parent().hide(), void 0) } window.xlog = function (a) { var b = window.console || { log: function () { } }; b.log && b.log(a) }, "object" != typeof JSON && (JSON = {}), function () { "use strict"; function f(a) { return 10 > a ? "0" + a : a } function this_value() { return this.valueOf() } function quote(a) { return rx_escapable.lastIndex = 0, rx_escapable.test(a) ? '"' + a.replace(rx_escapable, function (a) { var b = meta[a]; return "string" == typeof b ? b : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4) }) + '"' : '"' + a + '"' } function str(a, b) { var c, d, e, f, g, h = gap, i = b[a]; switch (i && "object" == typeof i && "function" == typeof i.toJSON && (i = i.toJSON(a)), "function" == typeof rep && (i = rep.call(b, a, i)), typeof i) { case "string": return quote(i); case "number": return isFinite(i) ? String(i) : "null"; case "boolean": case "null": return String(i); case "object": if (!i) return "null"; if (gap += indent, g = [], "[object Array]" === Object.prototype.toString.apply(i)) { for (f = i.length, c = 0; f > c; c += 1)g[c] = str(c, i) || "null"; return e = 0 === g.length ? "[]" : gap ? "[\n" + gap + g.join(",\n" + gap) + "\n" + h + "]" : "[" + g.join(",") + "]", gap = h, e } if (rep && "object" == typeof rep) for (f = rep.length, c = 0; f > c; c += 1)"string" == typeof rep[c] && (d = rep[c], e = str(d, i), e && g.push(quote(d) + (gap ? ": " : ":") + e)); else for (d in i) Object.prototype.hasOwnProperty.call(i, d) && (e = str(d, i), e && g.push(quote(d) + (gap ? ": " : ":") + e)); return e = 0 === g.length ? "{}" : gap ? "{\n" + gap + g.join(",\n" + gap) + "\n" + h + "}" : "{" + g.join(",") + "}", gap = h, e } } var gap, indent, meta, rep, rx_one = /^[\],:{}\s]*$/, rx_two = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, rx_three = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, rx_four = /(?:^|:|,)(?:\s*\[)+/g, rx_escapable = /[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, rx_dangerous = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g; "function" != typeof Date.prototype.toJSON && (Date.prototype.toJSON = function () { return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null }, Boolean.prototype.toJSON = this_value, Number.prototype.toJSON = this_value, String.prototype.toJSON = this_value), "function" != typeof JSON.stringify && (meta = { "\b": "\\b", "	": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\" }, JSON.stringify = function (a, b, c) { var d; if (gap = "", indent = "", "number" == typeof c) for (d = 0; c > d; d += 1)indent += " "; else "string" == typeof c && (indent = c); if (rep = b, b && "function" != typeof b && ("object" != typeof b || "number" != typeof b.length)) throw new Error("JSON.stringify"); return str("", { "": a }) }), "function" != typeof JSON.parse && (JSON.parse = function (text, reviver) { function walk(a, b) { var c, d, e = a[b]; if (e && "object" == typeof e) for (c in e) Object.prototype.hasOwnProperty.call(e, c) && (d = walk(e, c), void 0 !== d ? e[c] = d : delete e[c]); return reviver.call(a, b, e) } var j; if (text = String(text), rx_dangerous.lastIndex = 0, rx_dangerous.test(text) && (text = text.replace(rx_dangerous, function (a) { return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4) })), rx_one.test(text.replace(rx_two, "@").replace(rx_three, "]").replace(rx_four, ""))) return j = eval("(" + text + ")"), "function" == typeof reviver ? walk({ "": j }, "") : j; throw new SyntaxError("JSON.parse") }) }(), +function (a, b) { a.fn.fullScreen = function (c) { var d = a(document).width(), e = a(b).width(); return this.each(function () { var b = a(this), f = b.parent().width(), g = Math.max(e, d), h = 0; g > f && (h = parseInt(10 * (g - f) / 2) / 10), b.css({ left: -h }), b.css({ width: g }), "function" == typeof c && c(b) }) }, a.fn.altasfullScreen = function () { a(document).height(), a(b).height(); var f = a(b).width(); return this.each(function () { var b = a(this), c = b.offset().left; b.css({ left: -c, width: f }) }) }, a.fn.cutFillAuto = function () { var a, b, c, d; return this.cutFill(a, b, c, d, !0) }, a.fn.cutFill = function (b, c, d, e, f) { var g = b, h = c, i = function (a, b, c, d) { "" != a.attr("src") && ("undefined" == typeof g && (b = a.width()), "undefined" == typeof h && (c = a.height()), _cutFillInit(a, b, c, d)) }; return this.each(function () { var l, m, j = a(this), k = j.hasClass("NoCutFill"); if (k) return !0; if (f) { if ("ok" != j.attr("init")) return !0; if ("ok" != j.attr("autoFill")) return !0 } l = !1, "undefined" == typeof g && "undefined" == typeof h && ("ok" == j.attr("autoFill") ? (j.css("width", "").css("height", "").css("margin-left", "").css("margin-top", ""), l = !0) : f || j.attr("autoFill", "ok")), f || j.attr("init", "ok"), j[0].complete ? l ? (m = parseInt(j.attr("timeoutId")), m > 0 && clearTimeout(m), m = setTimeout(function () { i(j, b, c, d) }, 100), j.attr("timeoutId", m)) : i(j, b, c, d) : j.on("load", function () { i(j, b, c, d) }), "function" == typeof e && e(j) }), this }, _cutFillInit = function (b, c, d, e) { var f = a(b), g = parseInt(c), h = parseInt(d), i = f[0].naturalWidth, j = f[0].naturalHeight, k = g / 2, l = h / 2, m = i / j; m >= 1.5 ? g > h * m ? f.css("width", g + "px").css("height", "auto").css("marginTop", l - k * parseInt(j) / parseInt(i) + "px") : e || "undefined" == typeof e ? f.css("width", "auto").css("height", h + "px").css("marginLeft", k - l * parseInt(i) / parseInt(j) + "px") : f.css("width", "auto").css("height", h + "px") : h > g / m ? f.css("width", "auto").css("height", h + "px").css("marginLeft", k - l * parseInt(i) / parseInt(j) + "px") : f.css("width", g + "px").css("height", "auto").css("marginTop", l - k * parseInt(j) / parseInt(i) + "px") }, a.fn.FixFill = function (a, b, c) { var e, f, g, d = new Image; return d.src = this.attr("src"), e = d.width, f = d.height, g = {}, "x" == c ? (g.width = a, g.height = parseInt(a * f / e, 10)) : "y" == c ? (g.height = b, g.width = parseInt(b * e / f, 10)) : e > f ? (g.width = a, g.height = parseInt(a * f / e, 10)) : (g.height = b, g.width = parseInt(b * e / f, 10)), g }, a.fn.disableDrag = function () { a(this).draggable("option", "disabled", !0) }, a.fn.enableDrag = function () { a(this).draggable("option", "disabled", !1) }, a.fn.disableResize = function () { a(this).resizable("option", "disabled", !0) }, a.fn.enableResize = function () { a(this).resizable("option", "disabled", !1) } }(jQuery, window) + function (a) { var b; b = function () { this.options = { controlId: "", languageId: 2, isHideTitle: !1 }, this.init = function (b) { var c, d, e, f, g, h, i, j, k, l; return a.extend(this.options, b || {}), this.options.isHideTitle ? !1 : (c = window.location.origin, d = document.referrer, void 0 != d && "" != d && d.indexOf(c) > -1 && (e = d.substring(c.length, d.length).toLowerCase(), 0 === e.indexOf("/") && (e = e.substring(1, e.length)), e.indexOf("?") > -1 && (e = e.substring(0, e.indexOf("?"))), f = RegExp(/^\w*[a-zA-Z]+\w*$/), g = a("#" + this.options.controlId + " .w-crumbs").height(), h = a("#" + this.options.controlId + " .w-crumbs-item:first").text(), f.test(e) && (i = e + "_" + this.options.languageId, j = sessionStorage.getItem(i), null != j && j != h && (k = "", l = a("#" + this.options.controlId + " .w-crumbs i:first"), l.length > 0 && (k += '&nbsp;<i class="' + a(l).attr("class").replace("f-hide", "") + '">' + a(l).html() + "</i>"), k += '&nbsp;<a href="/' + e + '" class="w-crumbs-item">' + j + "</a>", a("#" + this.options.controlId + " .w-crumbs a:first").after(k), this.smrecompute(g)))), void 0) }, this.smrecompute = function (b) { var c = a("#" + this.options.controlId + " .w-crumbs").height(); a("#" + this.options.controlId).smrecompute("recomputeTo", [c, b]) } }, a.fn.smartNPCrumbsControl = function (c) { return b[c] ? b[c].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof c && c ? (a.error("Method " + method + " does not exist on jQuery.wzArticleCrumbsControl"), void 0) : (new b).init(c) } }(jQuery), +function (a) {
    var b; b = function () {
    this.options = { controlId: "", quantity: "w-num-input", minus: "w-num-minus", plus: "w-num-plus" }, this.init = function (b) { a.extend(this.options, b || {}), this._quantityElement = a("#" + this.options.controlId + " ." + this.options.quantity), this._minusElement = a("#" + this.options.controlId + " ." + this.options.minus), this._plusElement = a("#" + this.options.controlId + " ." + this.options.plus), this._bindEvent() }, this._formatQuantity = function (b) {
        var c = parseInt(b); (isNaN(c) || 1 > c) && (c = 1), c > 9999 && (c = 9999), this._quantityElement.val(c), 1 == c ? (a(this._minusElement).addClass("w-num-disabled"), a(this._minusElement).addClass("mw-num-disabled")) : c > 1 && (a(this._minusElement).removeClass("w-num-disabled"), a(this._minusElement).removeClass("mw-num-disabled"))
    }, this._bindEvent = function () { var b = this; a(b._minusElement).bind("click", function (a) { var c = b._quantityElement.val(); c = parseInt(c) - 1, b._formatQuantity(c), b._stopPropagation(a)._preventDefault(a) }), a(b._plusElement).bind("click", function (a) { var c = b._quantityElement.val(); c = parseInt(c) + 1, b._formatQuantity(c), b._stopPropagation(a)._preventDefault(a) }), a(b._quantityElement).bind("keypress", function (a) { var b = b || a; return currKey = b.keyCode || b.which || b.charCode, currKey >= 48 && 57 >= currKey || 8 == currKey ? void 0 : !1 }), a(b._quantityElement).bind("blur", function () { var c = b._quantityElement.val().replace(/\D/g, ""); b._formatQuantity(c) }), a(b._quantityElement).bind("afterpaste", function (a) { var c = b._quantityElement.val().replace(/\D/g, ""); b._formatQuantity(c), b._stopPropagation(a)._preventDefault(a) }) }, this._stopPropagation = function (a) { return a && a.stopPropagation ? a.stopPropagation() : a.cancelBubble = !0, this }, this._preventDefault = function (a) { return a && a.preventDefault ? a.preventDefault() : a.returnValue = !1, this }
    }, a.fn.wzQuantitySmartControl = function (c) { return b[c] ? b[c].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof c && c ? (a.error("Method " + method + " does not exist on jQuery.wzQuantitySmartControl"), void 0) : (new b).init(c) }
}(jQuery), +function (a) { var b; b = function () { var b = this; this.options = { controlId: "", entityId: 1, entityType: 1, pageIndex: 1, pageSize: 1, totalPageCount: 1, totalCount: 0, replyText: "回复", changeCaptchaText: "换一张", summitText: "发表", isShowAvatar: !0, isShowReplyIcon: !0, replyIcon: "&#xa096;", isMustLogin: !0, isLogin: !1, pagerStyle: "Style1_Item0", isShowPager: !0, eventSource: void 0, isPosting: !1, postType: "comment", commentTextEmpty: "请输入评论内容", commentTextMaxLength: "评论内容最长支付120个字符", replyTextEmpty: "请输入回复内容", replyTextMaxLength: "回复内容最长支付120个字符", captchaEmpty: "请输入验证码", captchaError: "验证码错误", error: "提交的数据有错误", pageNumberError: "请输入正确有页码", postCommentSucess: "提交评论成功", postCommentFail: "提交评论失败", postReplySucess: "回复评论成功", postReplyFail: "回复评论失败", adminUserName: "管理员", anonymousUserName: "匿名用户", isHiddenFullName: !1 }, this.init = function (b) { var c, d; a.extend(this.options, b || {}), c = a("#pageinfo").attr("data-entityid"), d = a("#pageinfo").attr("data-type"), "undefined" != typeof c && (this.options.entityId = parseInt(c)), "undefined" != typeof d && (this.options.entityType = parseInt(d)), this.loadCommentInfo() }, this.refreshCommentCaptcha = function (b, c) { this.options["Timestamp" + c] = Math.random(), a(b).attr("src", "/Common/GenerateCommentCaptcha?timestamp=" + this.options["Timestamp" + c]) }, this.loadCommentInfo = function () { a("#" + this.options.controlId + " .w_pager").hide(); var b = this; a.ajax({ url: "/Common/GetCommentInfo", type: "POST", async: !0, data: { entityId: b.options.entityId, entityType: b.options.entityType, isHiddenFullName: b.options.isHiddenFullName }, timeout: 5e3, dataType: "json", success: function (c) { var d, e; c.IsAllowComments ? (d = a("#" + b.options.controlId + " .w-comment-loginInfo"), e = a("#" + b.options.controlId + " .w-comment-code"), c.IsLogin ? (d.find("img").attr("src", c.Avatar), d.find(".name").text(c.UserName), d.parents(".w-comment-top").addClass("w-contleft"), d.show(), e.hide(), b.options.isLogin = !0) : (b.options.isLogin = !1, d.hide(), e.show()), a("#" + b.options.controlId).find(".w-comment").show(), b.initCommentHeight(), b.bindEvent(), b.loadCommentList(), b.refreshCommentCaptcha(a("#" + b.options.controlId + " .w-comment-top img.validCodeImg"), 0)) : a("#" + b.options.controlId).remove() } }) }, this.ajaxLogout = function () { var b = this; a.ajax({ url: "/Customer/AjaxLogout", type: "POST", async: !0, data: {}, timeout: 5e3, dataType: "json", success: function (c) { c.IsSuccess && a.get("/customer/GenerateNewCSRFToken", {}, function (c) { var d, e; a('input[name="__RequestVerificationToken"]').val(c.token), d = a("#" + b.options.controlId + " .w-comment-loginInfo"), e = a("#" + b.options.controlId + " .w-comment-code"), d.parents(".w-comment-top").removeClass("w-contleft"), d.hide(), e.show() }, "json") } }) }, this.loadCommentList = function (b) { var c = this, d = {}; d.entityId = c.options.entityId, d.entityType = c.options.entityType, d.pageIndex = c.options.pageIndex, d.pageSize = c.options.pageSize, d.isHiddenFullName = c.options.isHiddenFullName, a.ajax({ url: "/Comment/LoadCommentList", type: "POST", async: !0, data: d, timeout: 5e3, dataType: "json", success: function (d) { var e, f, g, h, i, j, k; if (d.IsSuccess) { for (e = a("#" + c.options.controlId + " .w-comment").height(), a("#" + c.options.controlId + " .w-comment-bottom .w-comment-num .text").text(d.total), f = "", g = d.rows, h = 0; h < g.length; h++) { if (i = g[h], "Comment.UserName.Admin" == i.CommentUserName && (i.CommentUserName = c.options.adminUserName), "Comment.UserName.Anonymous" == i.CommentUserName && (i.CommentUserName = c.options.anonymousUserName), f += '<div class="w-comment-list-item" commentId=' + i.Id + ">", f += '    <div class="w-comment-list-user" style="' + (c.options.isShowAvatar ? "" : "display:none") + '">', f += '       <img alt="" src="' + i.CommentUserAvatar + '">', f += "       </div>", f += '       <div class="w-comment-list-con">', f += '           <div class="w-comment-list-time"><span class="w-fl">' + i.CommentUserName + '</span> <span class="w-fr">' + i.CreateDatetime + "</span></div>", f += '           <div class="w-comment-list-des' + (i.CommentUserIsAdmin ? " w-comment-list-des-admin" : "") + '">' + i.CommentText + "</div>", void 0 != i.Reply && null != i.Reply && i.Reply.length > 0) for (j = 0; j < i.Reply.length; j++)k = i.Reply[j], "Comment.UserName.Admin" == k.CommentUserName && (k.CommentUserName = c.options.adminUserName), "Comment.UserName.Anonymous" == k.CommentUserName && (k.CommentUserName = c.options.anonymousUserName), f += ' <div class="w-comment-talk">', f += '    <div class="w-comment-talk-item">', f += '        <div class="w-comment-talk-name w-fl">' + k.CommentUserName + "：</div>", f += '        <div class="w-comment-talk-info">' + k.CommentText + "</div>", f += "    </div>", f += " </div>"; f += '           <div class="w-comment-list-reply f-clearfix"><a href="javascript:void(0)" class="toggleReply"><i class="mw-iconfont" style="' + (c.options.isShowReplyIcon ? "" : "display:none") + '">' + c.options.replyIcon + "</i> " + c.options.replyText + "</a></div>", f += '           <div class="w-comment-list-reply-cont" style="display:none">', f += '               <div class="w-comment-cont"><textarea name="replyText" rows="3" maxlength="120" placeholder="' + c.options.replyText + " " + i.CommentUserName + '："></textarea> <span class="words"><span>0</span>/120</span></div>', f += '               <div class="w-comment-operate clearfix">', f += '                   <div class="w-comment-code">', f += '                       <input type="text" class="w-comment-code-input">', f += '                           <a class="change-another-one" href="javascript:void(0)" title="' + c.options.changeCaptchaText + '"><img class="validCodeImg" src="/Content/images/code.png" height="26"></a>', f += "                   </div>", f += '                   <div class="w-comment-button"><a href="javascript:void(0)">' + c.options.summitText + "</a></div>", f += "                       </div>", f += "                   </div>", f += "               </div>", f += "           </div>" } a("#" + c.options.controlId + " .w-comment-bottom .w-comment-list").html(f), c.options.totalPageCount = d.pageTotal, c.options.totalCount = d.total, c.showPager(), c.smrecompute(e), b && c.goToComemntTextbox() } } }) }, this.bindEvent = function () { var b = this; a("#" + this.options.controlId + " .w-comment-top img.validCodeImg").on("click", function () { b.refreshCommentCaptcha(this, 0) }), a("#" + this.options.controlId + " .w-comment-bottom .w-comment-list").on("click", "a.toggleReply", function () { var d, e, c = a("#" + b.options.controlId + " .w-comment").height(); a(this).parent().next().is(":hidden") ? (b.options.isLogin ? a(this).parent().next().find(".w-comment-code").hide() : (d = a(this).parent().next().find("img"), "/content/images/code.png" == d.attr("src").toLowerCase() && (e = a("#" + b.options.controlId + " .w-comment-bottom .w-comment-list img.validCodeImg").index(d), e += 1, b.refreshCommentCaptcha(d, e))), a(this).parent().addClass("open"), a(this).parent().next().show()) : (a(this).parent().removeClass("open"), a(this).parent().next().hide()), b.smrecompute(c) }), a("#" + this.options.controlId + " .w-comment-bottom .w-comment-list").on("click", "img.validCodeImg", function () { var c = a("#" + b.options.controlId + " .w-comment-bottom .w-comment-list img.validCodeImg").index(this); c += 1, b.refreshCommentCaptcha(a(this), c) }), a("#" + this.options.controlId).on("click", ".w-comment-button a", function () { return b.options.isPosting ? !1 : b.options.isMustLogin && (b.getCurrentUser(), !b.options.isLogin) ? (b.ajaxLogin(), void 0) : (a(this).parents(".w-comment-list-reply-cont").length > 0 ? (b.options.eventSource = this, b.options.postType = "reply", b.submitReply()) : (b.options.eventSource = this, b.options.postType = "comment", b.submitComment()), void 0) }), a("#" + this.options.controlId + " .w-comment-top .w-comment-loginInfo").on("click", "a.quit", function () { b.ajaxLogout() }), a("#" + this.options.controlId).on("keyup", "textarea", function () { var b = a(this).val().length; a(this).next().find("span").text(b) }), a("#" + this.options.controlId).on("click", "textarea", function () { b.options.isMustLogin && (b.getCurrentUser(), b.options.isLogin || b.ajaxLogin()) }) }, this.submitComment = function () { var c, a = this.serializePostData(), b = 0; a.Timestamp = this.options["Timestamp" + b], c = this.checkPostData(a), c && (a.CommentText = escape(a.CommentText), this.postComment(a)) }, this.submitReply = function () { var e, b = this.serializePostData(), c = a(this.options.eventSource).parent().prev().find(".validCodeImg"), d = a("#" + this.options.controlId + " .w-comment-bottom .w-comment-list img.validCodeImg").index(c); d += 1, b.Timestamp = this.options["Timestamp" + d], b.AtCommentId = a(this.options.eventSource).parents(".w-comment-list-item").attr("commentid"), e = this.checkPostData(b), e && (b.CommentText = escape(b.CommentText), this.postComment(b)) }, this.checkPostData = function (b) { var c = this.options.postType; if (this.clearError(), "" == a.trim(b.CommentText)) return "comment" == c ? this.showError(this.getCurrentCommentElement(), this.options.commentTextEmpty) : this.showError(this.getCurrentCommentElement(), this.options.replyTextEmpty), !1; if (b.CommentText.length > 120) return "comment" == c ? this.showError(this.getCurrentCommentElement(), this.options.commentTextMaxLength) : this.showError(this.getCurrentCommentElement(), this.options.replyTextMaxLength), !1; if ("" == a.trim(b.Captcha)) if ("comment" == c) { if (!this.options.isLogin) return this.showError(this.getCurrentCaptchaElement(), this.options.captchaEmpty), !1 } else if (!this.options.isLogin) return this.showError(this.getCurrentCaptchaElement(), this.options.captchaEmpty), !1; return !0 }, this.serializePostData = function () { var b = this.options.eventSource, c = {}; return c.CommentText = a(b).parent().parent().parent().find("textarea").val(), c.CommentText = a.trim(c.CommentText), c.Captcha = a(b).parent().parent().find(".w-comment-code-input").val(), c.EntityId = this.options.entityId, c.EntityType = this.options.entityType, c }, this.smrecompute = function (b) { var c = a("#" + this.options.controlId + " .w-comment").height(); a("#" + this.options.controlId).smrecompute("recomputeTo", [c, b]) }, this.postComment = function (b) { var c = this; c.options.isPosting = !0, a.ajax({ url: "/Comment/AddComment", type: "POST", async: !0, data: b, timeout: 5e3, dataType: "json", success: function (b) { b.IsSuccess ? ("comment" == c.options.postType ? alert(c.options.postCommentSucess) : alert(c.options.postReplySucess), a(c.getCurrentCommentElement()).val(""), a(c.getCurrentCaptchaElement()).val(""), c.loadCommentList()) : "undefined" != typeof b.validate && ("Captcha" == b.target && c.showError(c.getCurrentCaptchaElement(), b.validate), ("Comment" == b.target || "Reply" == b.target) && c.showError(c.getCurrentCommentElement(), b.validate)) }, complete: function () { c.options.isPosting = !1 } }) }, this.showPager = function () { var c, f; this.options.pagerStyle, c = this.options.controlId, this.options.pageIndex, this.options.totalPageCount, this.options.isShowPager && this.options.totalPageCount > 1 ? (f = a("#" + c).find(".xn-pager"), f.jqPaginator("option", { totalCounts: this.options.totalCount, onPageChange: this.onPageChange }), a("#" + c + " .xn-pager").show()) : a("#" + c + " .xn-pager").hide() }, this.ajaxLogin = function () { var b = this; a.get("/ebusiness/RenderLoginPartial", {}, function (c) { a("body").append(c), window["CommentAjaxLoginCallBack"] = function (a) { a.IsSuccess && a.IsLogin && b.getCurrentUser() } }) }, this.clearError = function () { a("#" + this.options.controlId + " .w-haserror").removeClass("w-haserror"), a("#" + this.options.controlId + " .notifi").remove() }, this.showError = function (b, c) { var d, e; this.clearError(), a(b).parent().addClass("w-haserror"), a(b).parent().parent().append('<span class="notifi"><i class="mw-iconfont">?</i>' + c + "</span>"), d = a(this.options.eventSource).parent().prevAll(), e = 0, d.each(function () { a(this).is(":visible") && (e = a(this).width()) }), a("#" + this.options.controlId).find(".notifi").css("left", e + "px") }, this.getCurrentCommentElement = function () { var b = this.options.eventSource; return a(b).parent().parent().parent().find("textarea") }, this.getCurrentCaptchaElement = function () { var b = this.options.eventSource; return a(b).parent().parent().parent().find(".w-comment-code-input") }, this.getCurrentUser = function () { var b = this; a.ajax({ url: "/Common/GetCommentInfo", type: "POST", async: !0, data: { entityId: b.options.entityId, entityType: b.options.entityType }, timeout: 5e3, dataType: "json", success: function (c) { var d = a("#" + b.options.controlId + " .w-comment-top .w-comment-loginInfo"), e = a("#" + b.options.controlId + " .w-comment-top .w-comment-code"); c.IsLogin ? (d.find("img").attr("src", c.Avatar), d.find(".name").text(c.UserName), d.parents(".w-comment-top").addClass("w-contleft"), d.show(), e.hide(), b.options.isLogin = !0) : (b.options.isLogin = !1, d.parents(".w-comment-top").removeClass("w-contleft"), d.hide(), e.show()) } }) }, this.goToComemntTextbox = function () { a("#" + this.options.controlId)[0].scrollIntoView() }, this.initCommentHeight = function () { var b = a("#" + this.options.controlId).height(), c = a("#" + this.options.controlId + " .w-comment").height(); a("#" + this.options.controlId).css("min-height", c + "px"), a("#" + this.options.controlId).attr("hish", c), this.smrecompute(b) }, this.onPageChange = function (a, c) { if ("change" == c) { if (0 >= a || a == b.options.pageIndex || a > b.options.totalPageCount) return; b.options.pageIndex = a, b.loadCommentList(!0) } } }, a.fn.smartNPCommentControl = function (c) { return b[c] ? b[c].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof c && c ? (a.error("Method " + method + " does not exist on jQuery.smartNPCommentControl"), void 0) : (new b).init(c) } }(jQuery), +function (a) { var b; b = function () { this.options = { controlId: "", controlType: "Pc", style: "Style1", $subjectElement: {}, $messageElement: {}, $emailElement: {}, $captchaElement: {}, $submitElement: {}, $resetElement: {}, isPosting: !1, emptyPrefix: "请输入", correctMailPrefix: "请输入正确的", contentMaxLength: "不能超过200个字符", postSucess: "提交成功", postFail: "提交失败", correctMailValidate: "请输入正确格式的邮箱！" }, this.init = function (b) { a.extend(this.options, b || {}), this.options.$subjectElement = a("#" + this.options.controlId + " input[name='Subject']"), this.options.$messageElement = a("#" + this.options.controlId + " textarea[name='Message']").length > 0 ? a("#" + this.options.controlId + " textarea[name='Message']") : a("#" + this.options.controlId + " input[name='Message']"), this.options.$emailElement = a("#" + this.options.controlId + " input[name='Email']"), this.options.$captchaElement = a("#" + this.options.controlId + " input[name='Captcha']"), this.options.$submitElement = a("#" + this.options.controlId + " a[name='Submit']"), this.options.$resetElement = a("#" + this.options.controlId + " a[name='Reset']"), a("#" + this.options.controlId + " .mw-guestbook").length > 0 && (this.options.controlType = "Mobile"), this.options.style = a("#" + this.options.controlId).attr("cstyle"), a("#" + this.options.controlId + " .w-item-textarea").height(a("#" + this.options.controlId + " .w-guestbook-both-left").outerHeight() - 12), this.refreshLeavewordCaptcha(), this.bindEvent() }, this.refreshLeavewordCaptcha = function () { this.options["Timestamp"] = Math.random(), a("#" + this.options.controlId + " img").attr("src", "/Common/GenerateLeavewordCaptcha?timestamp=" + this.options["Timestamp"]) }, this.bindEvent = function () { var b = this; a("#" + this.options.controlId + " img").on("click", function () { b.refreshLeavewordCaptcha() }), a("#" + this.options.controlId).on("click", "a[name='Submit']", function () { return b.options.isPosting ? !1 : (b.submitLeaveword(), void 0) }), a("#" + this.options.controlId).on("click", "a[name='Reset']", function () { b.reset() }) }, this.submitLeaveword = function () { var a = this.serializePostData(), b = this.checkPostData(a); b && this.postLeaveword(a) }, this.checkPostData = function (b) { return this.clearError(), "" == a.trim(b.Subject) ? (this.showError(this.options.$subjectElement, this.options.emptyPrefix + " " + this.getElementTitle(this.options.$subjectElement)), !1) : b.Subject.length > 200 ? (this.showError(this.options.$subjectElement, this.getElementTitle(this.options.$subjectElement) + " " + this.options.contentMaxLength), !1) : "" == a.trim(b.Message) ? (this.showError(this.options.$messageElement, this.options.emptyPrefix + " " + this.getElementTitle(this.options.$messageElement)), !1) : "" == a.trim(b.Email) ? (this.showError(this.options.$emailElement, this.options.correctMailValidate), !1) : a.wezhan.isEmail(b.Email) ? "" == a.trim(b.Captcha) ? (this.showError(this.options.$captchaElement, this.options.emptyPrefix + " " + this.getElementTitle(this.options.$captchaElement)), !1) : !0 : (this.showError(this.options.$emailElement, this.options.correctMailValidate), !1) }, this.serializePostData = function () { var a = {}; return a.Subject = this.options.$subjectElement.val(), a.Message = this.options.$messageElement.val(), a.Email = this.options.$emailElement.val(), a.Captcha = this.options.$captchaElement.val(), a.Timestamp = this.options["Timestamp"], a }, this.smrecompute = function () { a("#" + this.options.controlId).smrecompute() }, this.postLeaveword = function (b) { var c = this; c.options.isPosting = !0, b.Subject = escape(b.Subject), b.Message = escape(b.Message), a.ajax({ url: "/Leaveword/AppendLeaveword", type: "POST", async: !0, data: b, timeout: 5e3, dataType: "json", success: function (a) { a.IsSuccess ? (alert(c.options.postSucess), c.reset(), c.refreshLeavewordCaptcha()) : void 0 != a.target && "Captcha" == a.target ? c.showError(c.options.$captchaElement, a.validate) : alert(c.options.postFail) }, complete: function () { c.options.isPosting = !1 } }) }, this.clearError = function () { "Pc" == this.options.controlType ? (a("#" + this.options.controlId + " .w-verify").addClass("w-hide"), a("#" + this.options.controlId + " .w-verify-text").text("")) : (a("#" + this.options.controlId + " .mw-verify").addClass("mw-hide"), a("#" + this.options.controlId + " .mw-verify-text").text("")), a("#" + this.options.controlId + " .w-haserror").removeClass("w-haserror") }, this.showError = function (b, c) { this.clearError(), "Style6" == this.options.style && "Message" == a(b).attr("name") ? a(b).parent().parent().addClass("w-haserror") : a(b).parent().addClass("w-haserror"), "Pc" == this.options.controlType ? (a("#" + this.options.controlId + " .w-verify-text").text(c), a("#" + this.options.controlId + " .w-verify").removeClass("w-hide")) : (a("#" + this.options.controlId + " .mw-verify-text").text(c), a("#" + this.options.controlId + " .mw-verify").removeClass("mw-hide")) }, this.getElementTitle = function (a) { if ("Pc" == this.options.controlType) { if ("Style1" == this.options.style) return a.attr("placeHolder"); if ("Style2" == this.options.style) return "Captcha" == a.attr("name") ? a.parent().parent().prev().html() : a.parent().prev().html(); if ("Style3" == this.options.style) return a.parents("td").prev().find("label").html(); if ("Style4" == this.options.style || "Style5" == this.options.style || "Style6" == this.options.style) return a.attr("placeHolder") } else { if ("Style1" == this.options.style) return a.attr("placeHolder"); if ("Style2" == this.options.style) return a.attr("placeHolder") } }, this.reset = function () { this.clearError(), this.options.$subjectElement.val(""), this.options.$messageElement.val(""), this.options.$emailElement.val(""), this.options.$captchaElement.val("") } }, a.fn.smartNPLeavewordControl = function (c) { return b[c] ? b[c].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof c && c ? (a.error("Method " + method + " does not exist on jQuery.smartNPLeavewordControl"), void 0) : (new b).init(c) } }(jQuery), +function (a) {
    var b; b = function () {
        var b = this; this.options = { controlId: "", entityId: 1, entityType: 1, pageIndex: 1, pageSize: 1, totalPageCount: 1, totalCount: 0, replyText: "回复", changeCaptchaText: "换一张", summitText: "发表", isShowAvatar: !0, isShowReplyIcon: !0, replyIcon: "&#xa096;", isMustLogin: !0, isLogin: !1, pagerStyle: "Style1_Item0", isShowPager: !0, eventSource: void 0, isPosting: !1, postType: "comment", commentTextEmpty: "请输入评论内容", commentTextMaxLength: "评论内容最长支付120个字符", replyTextEmpty: "请输入回复内容", replyTextMaxLength: "回复内容最长支付120个字符", captchaEmpty: "请输入验证码", captchaError: "验证码错误", error: "提交的数据有错误", pageNumberError: "请输入正确有页码", postCommentSucess: "提交评论成功", postCommentFail: "提交评论失败", postReplySucess: "回复评论成功", postReplyFail: "回复评论失败", adminUserName: "管理员", anonymousUserName: "匿名用户", isHiddenFullName: !1, atCommentId: 0 }, this.init = function (b) { var c, d; a.extend(this.options, b || {}), c = a("#pageinfo").attr("data-entityid"), d = a("#pageinfo").attr("data-type"), "undefined" != typeof c && (this.options.entityId = parseInt(c)), "undefined" != typeof d && (this.options.entityType = parseInt(d)), this.loadCommentInfo() }, this.refreshCommentCaptcha = function (b, c) { this.options["Timestamp" + c] = Math.random(), a(b).attr("src", "/Common/GenerateCommentCaptcha?timestamp=" + this.options["Timestamp" + c]) }, this.loadCommentInfo = function () { a("#" + this.options.controlId + " .w_pager").hide(); var b = this; a.ajax({ url: "/Common/GetCommentInfo", type: "POST", async: !0, data: { entityId: b.options.entityId, entityType: b.options.entityType, isHiddenFullName: b.options.isHiddenFullName }, timeout: 5e3, dataType: "json", success: function (c) { var d, e; c.IsAllowComments ? (d = a("#" + b.options.controlId + " .mw-comment-dialogue-cont .mw-comment-loginInfo"), e = a("#" + b.options.controlId + " .mw-comment-dialogue-cont .mw-comment-code"), c.IsLogin ? (d.find("img").attr("src", c.Avatar), d.find(".name").text(c.UserName), d.show(), e.hide(), b.options.isLogin = !0) : (b.options.isLogin = !1, d.hide(), e.show()), a("#" + b.options.controlId).find(".mw-comment").show(), b.initCommentHeight(), b.bindEvent(), b.loadCommentList(), b.refreshCommentCaptcha(a("#" + b.options.controlId + " .mw-comment-dialogue-cont img.validCodeImg"), 0)) : a("#" + b.options.controlId).remove() } }) }, this.ajaxLogout = function () { var b = this; a.ajax({ url: "/Customer/AjaxLogout", type: "POST", async: !0, data: {}, timeout: 5e3, dataType: "json", success: function (c) { c.IsSuccess && a.get("/customer/GenerateNewCSRFToken", {}, function (c) { var d, e; a('input[name="__RequestVerificationToken"]').val(c.token), d = a("#" + b.options.controlId + " .mw-comment-loginInfo"), e = a("#" + b.options.controlId + " .mw-comment-code"), d.hide(), e.show() }, "json") } }) }, this.loadCommentList = function (b) { var c = this, d = {}; d.entityId = c.options.entityId, d.entityType = c.options.entityType, d.pageIndex = c.options.pageIndex, d.pageSize = c.options.pageSize, d.isHiddenFullName = c.options.isHiddenFullName, a.ajax({ url: "/Comment/LoadCommentList", type: "POST", async: !0, data: d, timeout: 5e3, dataType: "json", success: function (d) { var e, f, g, h, i, j, k; if (d.IsSuccess) { for (e = a("#" + c.options.controlId + " .mw-comment").height(), a("#" + c.options.controlId + " .mw-comment-num .text").text(d.total), f = "", g = d.rows, h = 0; h < g.length; h++) { if (i = g[h], "Comment.UserName.Admin" == i.CommentUserName && (i.CommentUserName = c.options.adminUserName), "Comment.UserName.Anonymous" == i.CommentUserName && (i.CommentUserName = c.options.anonymousUserName), f += '<div class="mw-comment-list-item" commentId=' + i.Id + ">", f += '    <div class="mw-comment-list-user" style="' + (c.options.isShowAvatar ? "" : "display:none") + '">', f += '       <img alt="" src="' + i.CommentUserAvatar + '">', f += "       </div>", f += '       <div class="mw-comment-list-con">', f += '           <div class="mw-comment-list-time"><span class="mw-fr">' + i.CreateDatetime + '</span><span class="mw-fl">' + i.CommentUserName + "</span></div>", f += '           <div class="mw-comment-list-des' + (i.CommentUserIsAdmin ? " mw-comment-list-des-admin" : "") + '">' + i.CommentText + "</div>", void 0 != i.Reply && null != i.Reply && i.Reply.length > 0) for (j = 0; j < i.Reply.length; j++)k = i.Reply[j], "Comment.UserName.Admin" == k.CommentUserName && (k.CommentUserName = c.options.adminUserName), "Comment.UserName.Anonymous" == k.CommentUserName && (k.CommentUserName = c.options.anonymousUserName), f += ' <div class="mw-comment-talk">', f += '    <div class="mw-comment-talk-item">', f += '        <div class="mw-comment-talk-name mw-fl">' + k.CommentUserName + "：</div>", f += '        <div class="mw-comment-talk-info">' + k.CommentText + "</div>", f += "    </div>", f += " </div>"; f += '           <div class="mw-comment-list-reply f-clearfix"><a href="javascript:void(0)" class="toggleReply"><i class="mw-iconfont" style="' + (c.options.isShowReplyIcon ? "" : "display:none") + '">' + c.options.replyIcon + "</i> " + c.options.replyText + "</a></div>", f += "               </div>", f += "           </div>" } a("#" + c.options.controlId + " .mw-comment-list").html(f), c.options.totalPageCount = d.pageTotal, c.options.totalCount = d.total, c.showPager(), c.smrecompute(e), b && c.goToComemntTextbox() } } }) }, this.bindEvent = function () { var b = this; a("#" + this.options.controlId + " .mw-comment-dialogue-cont img.validCodeImg").on("click", function () { b.refreshCommentCaptcha(this, 0) }), a("#" + this.options.controlId + " .mw-comment-list").on("click", "a.toggleReply", function () { b.options.eventSource = this, b.options.isMustLogin ? b.getCurrentUser(b.showReply) : b.showReply() }), a("#" + this.options.controlId + " .mw-comment-dialogue-cont .mw-comment-button").on("click", function () { return b.options.isPosting ? !1 : (b.options.isMustLogin ? b.getCurrentUser(b.checkPostLogin) : "reply" == b.options.postType ? b.submitReply() : b.submitComment(), void 0) }), a("#" + this.options.controlId + " .mw-comment-dialogue-cont .mw-comment-loginInfo").on("click", "a.quit", function () { b.ajaxLogout() }), a("#" + this.options.controlId).on("keyup", "textarea", function () { var b = a(this).val().length; a(this).next().find("span").text(b) }), a("#" + this.options.controlId).on("click", "textarea", function () { }), a("#" + this.options.controlId + " .mw-comment-input").on("click", function () { b.options.isMustLogin ? b.getCurrentUser(b.showComment) : b.showComment() }), a("#" + this.options.controlId + " .mw-close").on("click", function () { b.closeCommentDialog() }) }, this.submitComment = function () { var c, a = this.serializePostData(), b = 0; a.Timestamp = this.options["Timestamp" + b], c = this.checkPostData(a), c && (a.CommentText = escape(a.CommentText), this.postComment(a)) }, this.submitReply = function () { var b, a = this.serializePostData(); index = 0, a.Timestamp = this.options["Timestamp" + index], a.AtCommentId = this.options.atCommentId, b = this.checkPostData(a), b && (a.CommentText = escape(a.CommentText), this.postComment(a)) }, this.checkPostData = function (b) { var c = this.options.postType; if (this.clearError(), "" == a.trim(b.CommentText)) return "comment" == c ? this.showError(this.getCurrentCommentElement(), this.options.commentTextEmpty) : this.showError(this.getCurrentCommentElement(), this.options.replyTextEmpty), !1; if (b.CommentText.length > 120) return "comment" == c ? this.showError(this.getCurrentCommentElement(), this.options.commentTextMaxLength) : this.showError(this.getCurrentCommentElement(), this.options.replyTextMaxLength), !1; if ("" == a.trim(b.Captcha)) if ("comment" == c) { if (!this.options.isLogin) return this.showError(this.getCurrentCaptchaElement(), this.options.captchaEmpty), !1 } else if (!this.options.isLogin) return this.showError(this.getCurrentCaptchaElement(), this.options.captchaEmpty), !1; return !0 }, this.serializePostData = function () { var b = {}; return b.CommentText = a("#" + this.options.controlId).find("textarea").val(), b.CommentText = a.trim(b.CommentText), b.Captcha = a("#" + this.options.controlId).find(".mw-comment-code-input").val(), b.EntityId = this.options.entityId, b.EntityType = this.options.entityType, b }, this.smrecompute = function (b) { var c = a("#" + this.options.controlId + " .mw-comment").height(); a("#" + this.options.controlId).smrecompute("recomputeTo", [c, b]) }, this.postComment = function (b) { var c = this; c.options.isPosting = !0, a.ajax({ url: "/Comment/AddComment", type: "POST", async: !0, data: b, timeout: 5e3, dataType: "json", success: function (b) { b.IsSuccess ? ("comment" == c.options.postType ? alert(c.options.postCommentSucess) : alert(c.options.postReplySucess), a(c.getCurrentCommentElement()).val(""), a(c.getCurrentCaptchaElement()).val(""), c.loadCommentList(), c.closeCommentDialog()) : "undefined" != typeof b.validate && ("Captcha" == b.target && c.showError(c.getCurrentCaptchaElement(), b.validate), ("Comment" == b.target || "Reply" == b.target) && c.showError(c.getCurrentCommentElement(), b.validate)) }, complete: function () { c.options.isPosting = !1 } }) }, this.showPager = function () { var c, f; this.options.pagerStyle, c = this.options.controlId, this.options.pageIndex, this.options.totalPageCount, this.options.isShowPager && this.options.totalPageCount > 1 ? (f = a("#" + c).find(".xn-pager"), f.jqPaginator("option", { totalCounts: this.options.totalCount, onPageChange: this.onPageChange }), a("#" + c + " .xn-pager").show()) : a("#" + c + " .xn-pager").hide() }, this.ajaxLogin = function () { var b = this; a.get("/ebusiness/RenderLoginPartial", {}, function (c) { a("body").append(c), window["CommentAjaxLoginCallBack"] = function (a) { a.IsSuccess && a.IsLogin && b.getCurrentUser() } }) }, this.clearError = function () { a("#" + this.options.controlId + " .w-haserror").removeClass("w-haserror"), a("#" + this.options.controlId + " .notifi").remove() }, this.showError = function (b, c) { this.clearError(), a("#" + this.options.controlId + " .mw-comment-dialogue .mw-comment-title").after('<div class="notifi"><i class="mw-iconfont">?</i>' + c + "</div>"), a(b).addClass("w-haserror") }, this.getCurrentUser = function (b) { var c = this; a.ajax({ url: "/Common/GetCommentInfo", type: "POST", async: !0, data: { entityId: c.options.entityId, entityType: c.options.entityType }, timeout: 5e3, dataType: "json", success: function (d) { var e = a("#" + c.options.controlId + " .mw-comment-dialogue-cont .mw-comment-loginInfo"), f = a("#" + c.options.controlId + " .mw-comment-dialogue-cont .mw-comment-code"); d.IsLogin ? (e.find("img").attr("src", d.Avatar), e.find(".name").text(d.UserName), e.show(), f.hide(), c.options.isLogin = !0) : (c.options.isLogin = !1, e.hide(), f.show()), "function" == typeof b && b.call(c) } }) }, this.getCurrentCommentElement = function () { return a("#" + this.options.controlId).find("textarea") }, this.getCurrentCaptchaElement = function () { return a("#" + this.options.controlId).find(".mw-comment-code ") }, this.goToComemntTextbox = function () { a("#" + this.options.controlId)[0].scrollIntoView() }, this.initCommentHeight = function () { var b = a("#" + this.options.controlId).height(), c = a("#" + this.options.controlId + " .mw-comment").height(); a("#" + this.options.controlId).css("min-height", c + "px"), a("#" + this.options.controlId).attr("hish", c), this.smrecompute(b) }, this.onPageChange = function (a, c) { if ("change" == c) { if (0 >= a || a == b.options.pageIndex || a > b.options.totalPageCount) return; b.options.pageIndex = a, b.loadCommentList(!0) } }, this.closeCommentDialog = function () { a("#" + this.options.controlId + " .mw-comment-dialogue-wrap").hide(), a("#" + this.options.controlId).removeClass("dialogshowed") }, this.showReply = function () { var b, c, d; return this.options.isMustLogin && !this.options.isLogin ? (this.ajaxLogin(), void 0) : (b = this.options.eventSource, c = a(b).parents(".mw-comment-list-item").attr("commentid"), d = a(b).parents(".mw-comment-list-con").find(".mw-comment-list-time").find(".mw-fl").text(), a("#" + this.options.controlId + " textarea").attr("placeholder", this.options.replyText + " " + d + "："), a("#" + this.options.controlId + " textarea").next().find("span").text(0), a("#" + this.options.controlId + " textarea").val(""), this.clearError(), this.options.postType = "reply", this.options.atCommentId = c, this.refreshCommentCaptcha(a("#" + this.options.controlId + " .mw-comment-dialogue-cont img.validCodeImg"), 0), a("#" + this.options.controlId + " .mw-comment-code-input").val(""), a("#" + this.options.controlId + " .mw-comment-dialogue-wrap").show(), a("#" + this.options.controlId).addClass("dialogshowed"), void 0) }, this.showComment = function () { return this.options.isMustLogin && !this.options.isLogin ? (this.ajaxLogin(), void 0) : (this.options.postType = "comment", this.options.atCommentId = 0, this.refreshCommentCaptcha(a("#" + this.options.controlId + " .mw-comment-dialogue-cont img.validCodeImg"), 0), a("#" + this.options.controlId + " .mw-comment-dialogue-wrap").show(), a("#" + this.options.controlId + " textarea").val(""), a("#" + this.options.controlId + " textarea").next().find("span").text(0), a("#" + this.options.controlId + " textarea").attr("placeholder", ""), a("#" + this.options.controlId + " .mw-comment-code-input").val(""), this.clearError(), a("#" + this.options.controlId).addClass("dialogshowed"), void 0) }, this.checkPostLogin = function () {
            return this.options.isLogin ? ("reply" == this.options.postType ? this.submitReply() : this.submitComment(), void 0) : (this.ajaxLogin(), void 0)
        }
    }, a.fn.smartNPMobileCommentControl = function (c) { return b[c] ? b[c].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof c && c ? (a.error("Method " + method + " does not exist on jQuery.smartNPMobileCommentControl"), void 0) : (new b).init(c) }
}(jQuery), +function ($) { var shareJson, shareNum = 0, baiDuShare = function () { this.options = { controlId: "", imageStyle: "", bdSize: "" }, this.init = function (opt) { $.extend(this.options, opt || {}), "" == shareJson || void 0 == shareJson ? shareJson = "{'tag':'" + this.options.controlId + "','bdStyle':'" + this.options.imageStyle + "','bdSize':'" + this.options.bdSize + "'}" : shareJson += ",{'tag':'" + this.options.controlId + "','bdStyle':'" + this.options.imageStyle + "','bdSize':'" + this.options.bdSize + "'}"; var data = { pageId: 1 == parseInt($("#pageinfo").attr("data-type")) - 1 ? $("#pageinfo").val() : $("#pageinfo").attr("data-entityid"), pageType: parseInt($("#pageinfo").attr("data-type")) - 1 }; window._bd_share_config = { common: { bdSnsKey: {}, bdText: "", bdMini: "2", bdPic: "", onAfterClick: function () { $.ajax({ cache: !1, url: "/BaiDuShare/IncrementShareCount", type: "post", data: data, dataType: "json", success: function (a) { a.IsSuccess && (shareNum++ , $(".bds_count").html(shareNum), $(".bds_count").attr("title", "累计分享" + shareNum + "次")) } }) } }, share: eval("([" + shareJson + "])") }, void 0 != window._bd_share_main && window._bd_share_main.init() } }; $.fn.smartShareControl = function (a) { return baiDuShare[a] ? baiDuShare[a].apply(this, Array.prototype.slice.call(arguments, 1)) : ("object" != typeof a && a ? $.error("Method " + method + " does not exist on jQuery.smartShareControl") : ((new baiDuShare).init(a), $("#smv_" + a.controlId).find("div[data-tag='" + a.controlId + "']").css("display", ""), window.onload = function () { var b = { pageId: 1 == parseInt($("#pageinfo").attr("data-type")) - 1 ? $("#pageinfo").val() : $("#pageinfo").attr("data-entityid"), pageType: parseInt($("#pageinfo").attr("data-type")) - 1 }; $.ajax({ cache: !1, url: "/BaiDuShare/GetShareCount", type: "post", data: b, dataType: "json", success: function (a) { a.IsSuccess ? (shareNum = a.num, $(".bds_count").html(shareNum), $(".bds_count").attr("title", "累计分享" + shareNum + "次")) : ($(".bds_count").html("0"), $(".bds_count").attr("title", "累计分享0次")), $(".mw-share .popup_more").attr("style", "background-position:inherit !important") } }), $("#smv_" + a.controlId).find("div[data-tag='" + a.controlId + "']").css("display", "") }), void 0) } }(jQuery), +function (a) { var b; b = function () { this.options = { controlId: "", controlType: "Pc", entityType: 1, entityId: 1, isLogin: !1, isInMyFavourite: !1, entityTypeName: "文章", favouriteSucess: "收藏成功", removeFavouriteSucess: "取消收藏成功" }, this.init = function (b) { var c, d, e; a.extend(this.options, b || {}), c = a("#pageinfo").attr("data-entityid"), d = a("#pageinfo").attr("data-type"), "undefined" != typeof c && (this.options.entityId = parseInt(c)), "undefined" != typeof d && (this.options.entityType = parseInt(d) - 1), this.bindEvent(), this.LoadFavorite(), 0 == a("#smvSysFavoriteModal").length && (e = "<div id='smvSysFavoriteModal'>", e += '       <div class="mw-modal mw-fade">', e += '           <div class="mw-smtips"></div>', e += "       </div>", e += "   </div>", a("body").append(e)) }, this.bindEvent = function () { var b = this; a("#" + this.options.controlId + " a").on("click", function () { b.postFavorite() }) }, this.LoadFavorite = function (b) { var c = this; CheckIfInMyFavourite(this.options.entityId, this.options.entityType, function (d, e) { c.options.isLogin = d, c.options.isInMyFavourite = e, e && a("#" + c.options.controlId + " .mw-collect").addClass("mw-current"), "function" == typeof b && b(c) }) }, this.smrecompute = function () { a("#" + this.options.controlId).smrecompute() }, this.checkFavorite = function (a) { a.options.isLogin ? a.options.isInMyFavourite ? a.removeFavorite() : a.addFavorite() : a.ajaxLogin() }, this.postFavorite = function () { this.LoadFavorite(this.checkFavorite) }, this.ajaxLogin = function () { var b = this; a.get("/ebusiness/RenderLoginPartial", { trigger: "favourite" }, function (c) { a("body").append(c), window["AjaxLoginCallBack"] = function (a) { a.IsSuccess && a.IsLogin && b.postFavorite() } }) }, this.addFavorite = function () { var b = this, c = this.options.entityTypeName + this.options.favouriteSucess; AddToMyFavourite(this.options.entityId, this.options.entityType, function () { a("#" + b.options.controlId + " .mw-collect").addClass("mw-current"), a("#smvSysFavoriteModal .mw-smtips").text(c), a("#smvSysFavoriteModal .mw-modal").removeClass("mw-fade").addClass("mw-fadein"), setTimeout(function () { a("#smvSysFavoriteModal .mw-modal").removeClass("mw-fadein").addClass("mw-fade") }, 1500) }) }, this.removeFavorite = function () { var b = this, c = this.options.entityTypeName + this.options.removeFavouriteSucess; DeleteFromMyFavourite(this.options.entityId, this.options.entityType, function () { a("#" + b.options.controlId + " .mw-collect").removeClass("mw-current"), a("#smvSysFavoriteModal .mw-smtips").text(c), a("#smvSysFavoriteModal .mw-modal").removeClass("mw-fade").addClass("mw-fadein"), setTimeout(function () { a("#smvSysFavoriteModal .mw-modal").removeClass("mw-fadein").addClass("mw-fade") }, 1500) }) } }, a.fn.smartNPwzFavoriteControl = function (c) { return b[c] ? b[c].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof c && c ? (a.error("Method " + method + " does not exist on jQuery.smartNPwzFavoriteControl"), void 0) : (new b).init(c) } }(jQuery), function () { function a(a) { this.ele = a, this.queryArr = [] } a.prototype.query = function (a) { var b = this; null == a && (a = ".lz-compare"), b.queryArr = $(b.ele).find(a) }, a.prototype.getSize = function (a) { var e, f, g, c = [], d = []; for ($(a).css("marginTop", ""), f = 0, g = a.length; g > f; f++)theHei = $(a[f]).outerHeight(), c.push(theHei); for (e = Math.max.apply(null, c), f = 0, g = a.length; g > f; f++)d.push((e - c[f]) / 2); return d }, a.prototype.setSize = function (a) { var c, d, b = this.getSize(a); for ($(a).css("marginTop", 0), c = 0, d = a.length; d > c; c++)0 != b[c] && $(a[c]).css("marginTop", b[c]) }, a.prototype.init = function (a) { var b = this; b.query(a), b.setSize(b.queryArr) }, $.fn.verticalCenter = function (b) { var c = $(this); $.each(c, function (c, d) { var e = new a(d); e.init(b) }) } }(jQuery), function (a) { a.fn.getxnresizeheight = function () { var b = 0; return a(this).find(">.yibuFrameContent>.xn-resize").each(function () { b += a(this).outerHeight(!0) }), b }, a.fn.smpreparerecompute = function () { if (!a(this).data("xn-heightbefore")) { var b = a(this).getxnresizeheight(); a(this).data("xn-heightbefore", b) } }, a.fn.smautorecompute = function () { var b = a(this).getxnresizeheight(), c = a(this).data("xn-heightbefore"); b != c && (a(this).smrecompute("recomputeTo", [b, c]), a(this).data("xn-heightbefore", b)) } }(jQuery), window.xwezhan = function () { return { initWz: function () { refreshStaticData(), this.removeEmptyLink(), this.linkToAnimate(), this.appendDialogToBody() }, removeEmptyLink: function () { $("a[href='']").removeAttr("href") }, changeRunTimeDeviceMode: function (a) { $.ajax({ cache: !1, url: "/Common/ChangeRunTimeDeviceMode", type: "post", data: "type=" + a, dataType: "json", success: function (b) { var c, d, e; b.IsSuccess && (c = void 0 == top ? window : top, d = c.location.href, d = unescape(d), a = a.toLowerCase(), e = "pc" == a ? "mobile" : "pc", d.indexOf("deviceModel=" + e) > -1 && d.replace("deviceModel=" + e, "deviceModel=" + a), c.location.href = d) }, error: function () { } }) }, linkToAnimate: function () { $("a[href*=#]").click(function () { var a, b; return location.pathname.replace(/^\//, "") == this.pathname.replace(/^\//, "") && location.hostname == this.hostname && this.hash && -1 == this.hash.indexOf("/") && (a = $(this.hash), a = a.length && a || $("[name=" + this.hash.slice(1) + "]"), a.length) ? (b = a.offset().top, $("html,body").animate({ scrollTop: b }, 1e3), !1) : void 0 }) }, cssRule: function (a, b, c) { var g, h, i, j, l, d = navigator.userAgent.toLowerCase(), e = /(msie\s|trident.*rv:)([\w.]+)/.test(d), f = 0; if (e && (g = d.match(/(?:msie\s([\w.]+))/), h = d.match(/(?:trident.*rv:([\w.]+))/), f = g && h && g[1] && h[1] ? Math.max(1 * g[1], 1 * h[1]) : g && g[1] ? 1 * g[1] : h && h[1] ? 1 * h[1] : 0), e && 11 != f) { if (void 0 === b || b && b.nodeType && 9 == b.nodeType) return c = b && b.nodeType && 9 == b.nodeType ? b : c || document, i = c.indexList || (c.indexList = {}), j = i[a], void 0 !== j ? c.styleSheets[j].cssText : void 0; if (c = c || document, i = c.indexList || (c.indexList = {}), j = i[a], "" === b) return void 0 !== j ? (c.styleSheets[j].cssText = "", delete i[a], !0) : !1; void 0 !== j ? sheetStyle = c.styleSheets[j] : (sheetStyle = c.createStyleSheet("", j = c.styleSheets.length), i[a] = j), sheetStyle.cssText = b } else { if (void 0 === b || b && b.nodeType && 9 == b.nodeType) return c = b && b.nodeType && 9 == b.nodeType ? b : c || document, l = c.getElementById(a), l ? l.innerHTML : void 0; if (c = c || document, l = c.getElementById(a), "" === b) return l ? (l.parentNode.removeChild(l), !0) : !1; l ? l.innerHTML = b : (l = c.createElement("style"), l.id = a, l.innerHTML = b, c.getElementsByTagName("head")[0].appendChild(l)) } }, cssUeditorTale: function (a) { xwezhan.cssRule("table", ".w-detail .selectTdClass{background-color:#edf5fa !important}.w-detail table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}.w-detail table{margin-bottom:10px;border-collapse:collapse;display:table;}.w-detail td,th{padding: 5px 10px;border: 1px solid #DDD;}.w-detail caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}.w-detail th{border-top:1px solid #BBB;background-color:#F7F7F7;}.w-detail table tr.firstRow th{border-top-width:2px;}.w-detail .ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }.w-detail td p{margin:0;padding:0;}"), "function" == typeof a && a() }, getQueryString: function (a) { var b = new RegExp("(^|&)" + a + "=([^&]*)(&|$)", "i"), c = window.location.search.substr(1).match(b); return null != c ? unescape(c[2]) : null }, appendDialogToBody: function () { $("div[ctype='dialog']").each(function () { $(this).find(".w-modal-mask").appendTo($("#systemDialogLayer")) }) }, disabledMobileDesignerScoll: function () { }, enabledMobileDesignerScoll: function () { } } }(window, document), +function (a) { var b; b = function () { this.options = { controlId: "", caption: "", hideByClickMask: !0, delayed: 1e3, isDefault: !1 }, this.init = function (b) { var c, d, e, f; return a.extend(this.options, b || {}), c = a("#" + this.options.controlId), d = a("#" + this.options.controlId + "_dialog_modal_mask"), this.bindEvent(), "None" == this.options.direction && (e = c.width(), f = c.height(), c.css("left", "50%"), c.css("top", "50%"), c.css("margin-top", "-" + f / 2 + "px"), c.css("margin-left", "-" + e / 2 + "px")), this.options.isDefault && (d.show(), c.hasClass("animated") ? (setTimeout(function () { c.smanimate("replay"), c.find(".animated").each(function () { a(this).smanimate("replay") }) }, 500), c.addClass("dialogshowed"), c.show()) : c.fadeIn(this.options.delayed, function () { c.addClass("dialogshowed"), c.find(".animated").each(function () { a(this).smanimate("replay") }) }), c.find("div[ctype='music']").each(function () { a(this).find(".lz-audio").hasClass("autoFlag") && a(this).find(".lz-audio").click() })), this }, this.bindEvent = function () { var c, b = this; a("#" + this.options.controlId + " .w-modal").on("click", ".w-modal-close", function () { b.close() }), a("#" + this.options.controlId + "_dialog_modal_mask").on("click", function () { b.options.hideByClickMask && b.close() }), c = a("#" + b.options.controlId).attr("cstyle"), "Style3" == c && a(window).on("resize", function () { var c = a(window).height(), d = a("#" + b.options.controlId).height(); c > d && a("#" + b.options.controlId).css({ height: c }), a("#" + b.options.controlId).find(".w-modal-content").css({ height: c }) }) }, this.close = function () { var b = this, c = a("#" + b.options.controlId), d = a("#" + b.options.controlId + "_dialog_modal_mask"); d.hide(), c.addClass("f-hide").removeClass("dialogshowed"), c.fadeOut(b.options.delayed, function () { c.find("div[ctype='music']").each(function () { var b = a(this).attr("id"), c = a.getAudio("#" + b + " .music_1 .lz-audio"); c.el.paused ? a(this).attr("isAutoPause", "0") : (a(this).attr("isAutoPause", "1"), c.el.pause()) }), c.find("div[ctype='video']").each(function () { var c, b = a(this).find("iframe"); b && (c = b.attr("src"), b.attr("src", c)) }) }), b.options.isAutoPause = !0 }, this.show = function () { var b = this, c = a("#" + b.options.controlId), d = a("#" + b.options.controlId + "_dialog_modal_mask"); c.removeClass("f-hide").addClass("dialogshowed"), d.show(), c.hasClass("animated") ? (c.smanimate("replay"), c.show(), c.find(".animated").each(function () { a(this).smanimate("replay") })) : c.fadeIn(b.options.delayed, function () { c.find(".animated").each(function () { a(this).smanimate("replay") }) }), c.find("div[ctype='music']").each(function () { var b, c; "1" == a(this).attr("isAutoPause") && (b = a(this).attr("id"), c = a.getAudio("#" + b + " .music_1 .lz-audio"), c.el.play()) }) } }, a.fn.smartNPwzDialogControl = function (c) { return b[c] ? b[c].apply(this, Array.prototype.slice.call(arguments, 1)) : "object" != typeof c && c ? (a.error("Method " + method + " does not exist on jQuery.smartNPwzDialogControl"), void 0) : (new b).init(c) }, window.showWZDialog = function (a) { void 0 != window["dialog_" + a] && "function" == typeof window["dialog_" + a].show ? window["dialog_" + a].show() : alert("该弹出窗口没有找到") } }(jQuery);