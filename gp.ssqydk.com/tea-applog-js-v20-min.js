!function(e){"object"==typeof module&&module.hasOwnProperty("exports")&&"object"==typeof exports?module.exports=e():"function"http://s3.pstatp.com/caijing/pure_resource/js/==typeof define&&define.amd?define(e):window.teaAppLog=e()}(function(){function e(e,t,n,r){if("object"!=typeof n)throw"objValue 必须是个对象。";(r=void 0===r||r)?(e[t]||(e[t]={}),u(e[t],n)):e[t]=n}function t(e,t){if(!c(e)){if(void 0===t&&(t={}),"object"!=typeof t)throw"params的类型不正确！";e=[[e,t]]}var n,o=[];for(n=0;n<e.length;n++){var s=e[n][1]||{};u(s,b,j),o.push({event:e[n][0],params:s})}for(n=0;n<o.length;n++)A.push(o[n]);S&&(l=setTimeout(function(){r()},0))}function n(e,t,n){c(n)||(n=[n]);for(var r=0;r<n.length;r++)n[r].params=JSON.stringify(n[r].params),n[r].time=Math.floor((new Date).getTime()/1e3);var o;t.headers&&(o=JSON.stringify(t.headers));var i={};u(i,t),i.headers=o;var a={user:e,header:i,events:n};1===y.verbose&&(a.verbose=1),y.caller&&(a.caller=y.caller),s(a)}function r(){!function(){if(A.length>0){for(var e=0;e<A.length;e++)u(A[e].params,j);n(y.user,y.header,A),A=[]}}()}function o(){var e=v,t=g;return O?(e=m,t=w):h&&(e=e.replace(/^https:\/\//,"http://"),t=t.replace(/^https:\/\//,"http://")),[e,t]}function s(e){i(o()[0],e)}function i(e,t,n){try{var r=new(XMLHttpRequest||window.ActiveXObject("Microsoft.XMLHTTP"));r.onreadystatechange=function(){4!==this.readyState||this.status>=200&&this.status<300?4===this.readyState&&"function"==typeof n&&n():(O&&console.log(this.status),a(t,n))},r.open("post",e),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify(t))}catch(e){if(a(t,n),O)throw e}}function a(e,t){var n=o()[1],r=d(e),s=new Image(1,1);s.onerror=function(){},s.onload=function(){"function"==typeof t&&t()},s.src=n+"?"+r}function d(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="&"+n+"="+JSON.stringify(e[n]));return t="&"===t[0]?t.slice(1):t}function u(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function p(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null}function f(e){var t,n={},r=navigator.userAgent;r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?(n.os_name="ios",(t=r.match(/iP.+OS\s([\d]{1,2}_[\d]{1,2}\s|[\d]{1,2}_[\d]{1,2}_[\d]{1,2}\s)/))&&t[1]&&(n.os_version=t[1].replace(/\s/g,"").replace(/_/g,"."))):-1!=r.indexOf("Android")&&(n.os_name="android",(t=r.match(/Android\s([\d]{1,2}\.[\d]{1,2};|[\d]{1,2}\.[\d]{1,2}\.[\d]{1,2};)/))&&t[1]&&(n.os_version=t[1].replace(/;/g,""))),u(y.header,n);var o={},s=p("tt_webid")||0;o.web_id=parseInt(s);var i;i=/NewsArticle/i.test(navigator.userAgent)?["ToutiaoJSBridge","call"]:["CaijingStockJSBridge","callHandler"];try{console.log(12,i),window[i[0]]&&window[i[0]][i[1]]("appInfo",{},function(t){"string"==typeof t&&(t=JSON.parse(t)),t.user_id=parseInt(t.user_id),t.device_id=parseInt(t.device_id),t.user_id?(o.user_type=12,o.user_id=parseInt(t.user_id),o.user_is_login=!0):(o.user_type=14,o.user_id=parseInt(t.device_id),o.user_is_login=!1),o.user_unique_id=o.user_type+"_"+o.user_id,o.device_id=parseInt(t.device_id),u(y.user,o),e&&e(),e=null}),setTimeout(function(){e&&(o.web_id=p("tt_webid")||"0",o.user_type=13,o.user_id=parseInt(o.web_id),o.user_is_login=!1,o.user_unique_id=o.web_id.toString(),o.web_id=parseInt(o.web_id),u(y.user,o),e&&e(),e=null)},2e3)}catch(t){e()}}var l=null,h=!1,_=!0,v="https://mcs.snssdk.com/v1/json",g="https://mcs.snssdk.com/v1/json",m="http://10.8.131.217:9908/v1/json",w="http://10.8.131.217:9908/v1/gif",y={user:{},header:{app_id:1202,app_name:"stock_h5"},events:[],verbose:0,caller:""},b={app_name:/NewsArticle/i.test(navigator.userAgent)?"1":/CaijingStock/i.test(navigator.userAgent)?"2":""},j={},S=!1,O=!1,A=[];return t.send=t,t.setUser=function(t,n){e(y,"user",t,n)},t.setHeader=function(t,n){e(y,"header",t,n)},t.setAppId=function(e){y.header.app_id=e},t.setAppName=function(e){y.header.app_name=e},t.setDebug=function(e){O=e=void 0!==e&&e,y.verbose=e?1:0},t.setCaller=function(e){y.caller=e},t.setEventCommonParams=function(e){u(j,e)},t.setHeaderHeaders=function(t,n){e(y.header,"headers",t,n)},t.setCustomHeader=function(t,n){y.header.headers=y.header.headers||{},e(y.header.headers,"custom",t,n)},t.disableHttps=function(e){h=!1!==e},t.setIntranetMode=function(e){_=e},t._setCommonHeaderData=f,f(function(){t.setEventCommonParams({url:encodeURIComponent(location.href)}),r(),S=!0}),t});